<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hrp.asset.mapper.AssetApprovalRecordMapper">

    <resultMap id="BaseResultMap" type="com.hrp.common.entity.AssetApprovalRecord">
        <id column="record_id" property="recordId"/>
        <result column="approval_id" property="approvalId"/>
        <result column="approver_id" property="approverId"/>
        <result column="approver_code" property="approverCode"/>
        <result column="approver_name" property="approverName"/>
        <result column="approval_type" property="approvalType"/>
        <result column="approval_opinion" property="approvalOpinion"/>
        <result column="approval_time" property="approvalTime"/>
        <result column="task_id" property="taskId"/>
    </resultMap>

    <select id="selectById" resultMap="BaseResultMap">
        SELECT * FROM asset_approval_record WHERE record_id = #{id}
    </select>

    <select id="selectByApprovalId" resultMap="BaseResultMap">
        SELECT * FROM asset_approval_record WHERE approval_id = #{approvalId} ORDER BY approval_time
    </select>

    <select id="selectByApproverId" resultMap="BaseResultMap">
        SELECT * FROM asset_approval_record WHERE approver_id = #{approverId} ORDER BY approval_time DESC
    </select>

    <insert id="insert" parameterType="com.hrp.common.entity.AssetApprovalRecord" useGeneratedKeys="true" keyProperty="recordId">
        INSERT INTO asset_approval_record (approval_id, approver_id, approver_code, approver_name,
                                          approval_type, approval_opinion, approval_time, task_id)
        VALUES (#{approvalId}, #{approverId}, #{approverCode}, #{approverName},
                #{approvalType}, #{approvalOpinion}, #{approvalTime}, #{taskId})
    </insert>

    <update id="updateById" parameterType="com.hrp.common.entity.AssetApprovalRecord">
        UPDATE asset_approval_record
        <set>
            <if test="approvalType != null">approval_type = #{approvalType},</if>
            <if test="approvalOpinion != null">approval_opinion = #{approvalOpinion},</if>
        </set>
        WHERE record_id = #{recordId}
    </update>

    <delete id="deleteById">
        DELETE FROM asset_approval_record WHERE record_id = #{id}
    </delete>

</mapper>







